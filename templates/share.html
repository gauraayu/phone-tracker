{% extends "base.html" %}
{% block content %}
<h2>Share Your Location</h2>
<p>Click below to share your current location.</p>
<form id="locForm" method="post" action="/submit_location">
    <input type="hidden" name="phone" value="{{ phone }}">
    <input type="hidden" id="lat" name="lat">
    <input type="hidden" id="lng" name="lng">
    <button type="button" onclick="sendLocation()">Share Now</button>
</form>
<script>
function sendLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(pos) {
            document.getElementById("lat").value = pos.coords.latitude;
            document.getElementById("lng").value = pos.coords.longitude;
            document.getElementById("locForm").submit();
        }, function() {
            alert("Location access denied.");
        });
    } else {
        alert("Geolocation not supported.");
    }
}
</script>
{% endblock %}
